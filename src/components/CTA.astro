---
import { Image } from 'astro:assets';
import { Calendar, Phone, MessageCircle, Mail } from 'astro-feather-icons';
import ctaIllustration from '../assets/images/illustration-cta.svg';

interface Props {
  lang: 'fr' | 'en' | 'it';
}

const { lang = 'fr' } = Astro.props;

const translations = {
  fr: {
    title: "Une question en droit du travail?",
    subtitle: "Contactez-moi. Je suis à votre écoute.",
    takeAppointment: "Prendre RDV",
    call: "Appeler",
    whatsapp: "WhatsApp",
    email: "Email",
  },
  en: {
    title: "Do you have a question about labor law?",
    subtitle: "Contact me. I'm here to listen.",
    takeAppointment: "Schedule Appointment",
    call: "Call",
    whatsapp: "WhatsApp",
    email: "Email",
  },
  it: {
    title: "Hai una domanda sul diritto del lavoro?",
    subtitle: "Contattami. Sono qui per ascoltarti.",
    takeAppointment: "Prendere Appuntamento",
    call: "Chiamare",
    whatsapp: "WhatsApp",
    email: "Email",
  }
};

const t = translations[lang];

const buttons = [
  { icon: Calendar, text: t.takeAppointment, attr: 'data-calendly' },
  { icon: Phone, text: t.call },
  { icon: MessageCircle, text: t.whatsapp },
  { icon: Mail, text: t.email },
];
---

<section id="contact" class="bg-white border border-gray-500 text-black py-16 px-8 my-16 text-center">
  <h2 class="text-4xl mb-4 font-light">{t.title}</h2>
  <div class="h-60 mb-4 relative max-w-full">
    <Image 
      src={ctaIllustration} 
      alt="illustration cta" 
      class="w-full h-full object-contain"
      width={600}
      height={240}
      loading="lazy"
      format="avif"
    />
  </div>
  <p class="mb-8 text-xl font-light">{t.subtitle}</p>
  <div class="flex flex-wrap justify-center gap-4">
    {buttons.map(({ icon: Icon, text, attr }) => (
      <button 
        class="bg-transparent text-black border border-black px-6 py-3 rounded-sm hover:bg-black hover:text-white transition duration-300 uppercase text-sm font-light flex items-center"
        {...attr && { [attr]: true }}
      >
        <Icon class="w-4 h-4 mr-2" /> {text}
      </button>
    ))}
  </div>
</section>