---
// src/components/Footer.astro
import { Image } from 'astro:assets';
import logoImage from '../assets/images/logo_crizzo_calli3.svg';

const { pathname } = Astro.url;
const currentLang = pathname.split('/')[1] || 'fr'; // Par défaut à 'fr' si aucune langue n'est trouvée

const translations = {
  fr: {
    copyright: "© 2024 Christine Rizzo",
    expertise: "Expertise",
    profil: "Profil",
    honoraires: "Honoraires",
    articles: "Articles",
    contact: "Contact",
    legalNotice: "Mentions légales",
    privacyPolicy: "Politique de confidentialité",
    design: "Design by Pwablo",
    ecoDesign: "Score d'éco-conception",
    credits: "Crédits",
    navigation: "Menu",
    legalPages: "Pages légales",
    ecoDesignPwablo: "Site web écologique"
  },
  en: {
    copyright: "© 2024 Christine Rizzo",
    expertise: "Expertise",
    profil: "Profile",
    honoraires: "Fees",
    articles: "Articles",
    contact: "Contact",
    legalNotice: "Legal Notice",
    privacyPolicy: "Privacy Policy",
    design: "Design by Pwablo",
    ecoDesign: "Eco-design Score",
    credits: "Credits",
    navigation: "Menu",
    legalPages: "Legal Pages",
    ecoDesignPwablo: "Eco-friendly Website"
  },
  it: {
    copyright: "© 2024 Christine Rizzo",
    expertise: "Competenza",
    profil: "Profilo",
    honoraires: "Onorari",
    articles: "Articoli",
    contact: "Contatto",
    legalNotice: "Note legali",
    privacyPolicy: "Politica sulla privacy",
    design: "Design di Pwablo",
    ecoDesign: "Punteggio eco-design",
    credits: "Crediti",
    navigation: "Menu",
    legalPages: "Pagine legali",
    ecoDesignPwablo: "Sito web ecologico"
  }
};

const t = translations[currentLang as keyof typeof translations] || translations.fr;

const isHomePage = pathname === `/${currentLang}` || pathname === `/${currentLang}/`;

const mainLinks = [
  { href: isHomePage ? "#expertise" : `/${currentLang}#expertise`, label: t.expertise },
  { href: isHomePage ? "#profil" : `/${currentLang}#profil`, label: t.profil },
  { href: isHomePage ? "#honoraires" : `/${currentLang}#honoraires`, label: t.honoraires },
  { href: isHomePage ? "#articles" : `/${currentLang}#articles`, label: t.articles },
  { href: isHomePage ? "#contact" : `/${currentLang}#contact`, label: t.contact },
];

const legalLinks = [
  { href: `/${currentLang}/legal`, label: t.legalNotice },
  { href: `/${currentLang}/privacy`, label: t.privacyPolicy }
];

const secondaryLinks = [
  { href: "https://pwablo.be", label: t.design },
  { href: "https://www.ecoindex.fr/resultat/?id=19de93fb-067c-4682-a25e-e37636dd5e6d", label: t.ecoDesign },
  { href: "/credits", label: t.credits }
];
---

<div class="full-bleed bg-beige">
  <footer class="bg-beige text-dark-gray py-8">
    <div class="container mx-auto px-4 text-center">
      <div class="flex flex-col items-center">
        <p class="text-sm mb-4 text-dark-gray">{t.copyright}</p>
        <div class="logo text-center mb-6">
          <Image src={logoImage} alt="Christine Rizzo Logo" class="h-16 md:h-24 w-auto" />
        </div>
        <div class="w-full">
          <div class="hidden md:flex justify-center space-x-4 mb-4">
            {mainLinks.map(link => (
              <a href={link.href} class="text-dark-gray hover:underline transition duration-300">{link.label}</a>
            ))}
          </div>
          <div class="hidden md:flex justify-center space-x-4">
            {[...legalLinks, ...secondaryLinks].map(link => (
              <a href={link.href} class="text-dark-gray hover:underline transition duration-300">{link.label}</a>
            ))}
          </div>
          <div class="md:hidden">
            <details class="mb-4">
              <summary class="cursor-pointer text-black hover:underline transition duration-300 px-3 py-2 text-center">{t.navigation}</summary>
              <nav class="flex flex-col items-center space-y-2">
                {mainLinks.map(link => (
                  <a href={link.href} class="text-dark-gray hover:underline transition duration-300 px-3 py-2 text-center">{link.label}</a>
                ))}
              </nav>
            </details>
            <details class="mb-4">
              <summary class="cursor-pointer text-black hover:underline transition duration-300 px-3 py-2 text-center">{t.legalPages}</summary>
              <nav class="flex flex-col items-center space-y-2">
                {[...legalLinks, ...secondaryLinks].map(link => (
                  <a href={link.href} class="text-dark-gray hover:underline transition duration-300 px-3 py-2 text-center">{link.label}</a>
                ))}
              </nav>
            </details>
            <details class="mb-4">
              <summary class="cursor-pointer text-black hover:underline transition duration-300 px-3 py-2 text-center">{t.ecoDesignPwablo}</summary>
              <nav class="flex flex-col items-center space-y-2">
                {secondaryLinks.map(link => (
                  <a href={link.href} class="text-dark-gray hover:underline transition duration-300 px-3 py-2 text-center">{link.label}</a>
                ))}
              </nav>
            </details>
          </div>
        </div>
      </div>
    </div>
  </footer>
</div>