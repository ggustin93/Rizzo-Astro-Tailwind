---
import BaseLayout from '../layouts/BaseLayout.astro';
import { Calendar, Mail, Phone, MessageCircle, Linkedin, MapPin } from 'astro-feather-icons';

const contactButtons = [
  { icon: 'calendar', text: 'PRENEZ RDV EN LIGNE', subtext: 'Le premier rdv est gratuit', action: 'calendly' },
  { icon: 'mail', text: 'ENVOYEZ-MOI UN E-MAIL', subtext: 'c.rizzo@avocat.be', action: 'mailto:c.rizzo@avocat.be' },
  { icon: 'phone', text: 'APPELEZ-MOI', subtext: 'numéro de téléphone (à venir)', action: '' },
  { icon: 'message-circle', text: 'LAISSEZ UN MESSAGE ÉCRIT OU AUDIO', subtext: 'WhatsApp', action: '' },
  { icon: 'linkedin', text: 'SUIVEZ-MOI SUR LINKEDIN', subtext: 'Restez informé', action: 'https://www.linkedin.com/in/christine-rizzo-avocat' },
  { icon: 'map-pin', text: 'TROUVEZ MON CABINET', subtext: 'Chaussée de Waterloo 1151, 1180 Bruxelles', action: 'https://www.google.com/maps/search/?api=1&query=Chauss%C3%A9e+de+Waterloo+1151%2C+1180+Bruxelles' }
];
---

<BaseLayout title="Contact - Christine Rizzo">
  <main class="container mx-auto px-4 py-16">
    <h1 class="text-4xl font-light mb-12 text-black text-center">Comment puis-je vous aider?</h1>
    
    <div class="grid md:grid-cols-2 gap-8">
      {contactButtons.map((button) => (
        <div class="bg-light-accent p-6 rounded-sm text-center">
          <button 
            data-action={button.action}
            class="w-full bg-transparent text-black border border-black px-6 py-4 rounded-sm hover:bg-black hover:text-white transition duration-300 uppercase text-sm font-light flex flex-col items-center justify-center h-full"
          >
            <i class="w-8 h-8 mb-2">
              {button.icon === 'calendar' && <Calendar />}
              {button.icon === 'mail' && <Mail />}
              {button.icon === 'phone' && <Phone />}
              {button.icon === 'message-circle' && <MessageCircle />}
              {button.icon === 'linkedin' && <Linkedin />}
              {button.icon === 'map-pin' && <MapPin />}
            </i>
            <span class="font-medium">{button.text}</span>
            <span class="text-xs mt-1">{button.subtext}</span>
          </button>
        </div>
      ))}
    </div>
  </main>
</BaseLayout>

<link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
<script is:inline src="https://assets.calendly.com/assets/external/widget.js"></script>
<script>
  document.addEventListener('astro:page-load', () => {
    window.Calendly.initBadgeWidget({ 
      url: 'https://calendly.com/decarbonaction/meeting', 
      text: 'Planifier du temps avec moi', 
      color: '#0069ff', 
      textColor: '#ffffff', 
      branding: undefined 
    });

    document.querySelectorAll('button[data-action]').forEach(button => {
      button.addEventListener('click', (e) => {
        e.preventDefault();
        const action = button.getAttribute('data-action');
        if (action === 'calendly') {
          window.Calendly.showPopupWidget('https://calendly.com/decarbonaction/meeting');
        } else if (action?.startsWith('mailto:')) {
          window.location.href = action;
        } else if (action) {
          window.open(action, '_blank');
        }
      });
    });
  });
</script>